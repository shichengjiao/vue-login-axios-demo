<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

<script>
  var salesOffices = {};                           // 定义售楼处
  salesOffices.clientList = [];                    // 缓存列表，存放订阅者的回调函数
  salesOffices.listen = function( fn ){            // 增加订阅者
    this.clientList.push( fn );                  // 订阅的消息添加进缓存列表
  };
  salesOffices.trigger = function(){               // 发布消息
    for( var i = 0, fn = this.clientList[ i ]; i < this.clientList.length; i++ ){
      fn.apply( this, arguments );             // arguments 是发布消息时带上的参数
    }
  };
  //调用
  salesOffices.listen( function( price, squareMeter ){//订阅消息
    console.log( '价格= ' + price );
    console.log( 'squareMeter= ' + squareMeter );
  });
  salesOffices.listen( function( price, squareMeter ){//订阅消息
    console.log( '价格2(打8折)= ' + price * 0.8 );
    console.log( 'squareMeter2= ' + squareMeter );
  });
  salesOffices.trigger( 2000000, 88 );                // 输出：200 万，88 平方米
  console.log(salesOffices.clientList);
</script>
</body>
</html>